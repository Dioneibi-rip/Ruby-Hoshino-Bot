const _0x4524e5=_0xdc8e;(function(_0x317d5b,_0x8c7e2a){const _0x230198=_0xdc8e,_0x3f807c=_0x317d5b();while(!![]){try{const _0x2acea0=parseInt(_0x230198(0xd0))/0x1*(-parseInt(_0x230198(0xe0))/0x2)+-parseInt(_0x230198(0x102))/0x3*(-parseInt(_0x230198(0xed))/0x4)+parseInt(_0x230198(0xd9))/0x5*(-parseInt(_0x230198(0xf9))/0x6)+-parseInt(_0x230198(0xe5))/0x7+-parseInt(_0x230198(0xd3))/0x8+-parseInt(_0x230198(0xd5))/0x9+parseInt(_0x230198(0xfb))/0xa*(parseInt(_0x230198(0xec))/0xb);if(_0x2acea0===_0x8c7e2a)break;else _0x3f807c['push'](_0x3f807c['shift']());}catch(_0x2021e4){_0x3f807c['push'](_0x3f807c['shift']());}}}(_0x1680,0x1e02d));import _0xee9b9d from'axios';import _0x356d09 from'yt-search';import{createDecipheriv}from'crypto';async function withRetries(_0x5b2c61){let _0x5b1848;for(let _0x48f8df=0x0;_0x48f8df<0x3;_0x48f8df++){try{return await _0x5b2c61();}catch(_0x11bf58){_0x5b1848=_0x11bf58;if(_0x48f8df<0x2)await new Promise(_0x1e83f7=>setTimeout(_0x1e83f7,0xc8));}}throw _0x5b1848;}const hexcode=_0x423ff1=>Buffer[_0x4524e5(0xf0)](_0x423ff1,_0x4524e5(0xf6));function decode(_0x57cfdf){const _0x4378c8=_0x4524e5;try{const _0x3a7ac0=_0x4378c8(0xfc),_0x168d16=Buffer['from'](_0x57cfdf,'base64'),_0x31444d=_0x168d16[_0x4378c8(0xea)](0x0,0x10),_0x425e35=_0x168d16[_0x4378c8(0xea)](0x10),_0x1f9d95=hexcode(_0x3a7ac0),_0x4c9933=createDecipheriv(_0x4378c8(0xd6),_0x1f9d95,_0x31444d);let _0xd8d360=Buffer[_0x4378c8(0xdb)]([_0x4c9933[_0x4378c8(0xd1)](_0x425e35),_0x4c9933[_0x4378c8(0xce)]()]);return JSON['parse'](_0xd8d360['toString']());}catch(_0x5d40da){throw new Error(_0x4378c8(0xfe)+_0x5d40da['message']);}}async function _getSavetubeInfo(_0x32da27){const _0x31ab8a=_0x4524e5,_0x3e0ff5=await _0xee9b9d[_0x31ab8a(0xfa)]('https://media.savetube.me/api/random-cdn',{'timeout':0x1b58}),_0x1f9a64=_0x3e0ff5?.[_0x31ab8a(0xdf)]?.[_0x31ab8a(0xe1)];if(!_0x1f9a64)throw new Error(_0x31ab8a(0xcd));const _0x3e167f=await _0xee9b9d[_0x31ab8a(0xda)]('https://'+_0x1f9a64+_0x31ab8a(0xeb),{'url':_0x32da27},{'timeout':0x1b58});if(!_0x3e167f?.[_0x31ab8a(0xdf)]?.[_0x31ab8a(0xdf)])throw new Error(_0x31ab8a(0xe8));const _0x5d9fe7=decode(_0x3e167f['data']['data']);if(!_0x5d9fe7[_0x31ab8a(0xd7)])throw new Error(_0x31ab8a(0xee));return{'cdn':_0x1f9a64,'info':_0x5d9fe7};}async function _fetchAudioFromSavetube(_0x5c1022){return withRetries(async()=>{const _0x2d9294=_0xdc8e,{cdn:_0x341684,info:_0x2f2c24}=await _getSavetubeInfo(_0x5c1022),_0x324c1d=await _0xee9b9d['post'](_0x2d9294(0xff)+_0x341684+_0x2d9294(0xf5),{'downloadType':_0x2d9294(0xe6),'quality':_0x2d9294(0xcc),'key':_0x2f2c24[_0x2d9294(0xd7)]},{'timeout':0x1b58}),_0x56d0a9=_0x324c1d?.['data']?.[_0x2d9294(0xdf)]?.[_0x2d9294(0xf8)]||_0x324c1d?.['data']?.[_0x2d9294(0xf8)];if(!_0x56d0a9)throw new Error(_0x2d9294(0xd8));return{'title':_0x2f2c24[_0x2d9294(0xe9)],'mp3':_0x56d0a9};});}function _0xdc8e(_0x9ab7eb,_0x464f5c){const _0x16805b=_0x1680();return _0xdc8e=function(_0xdc8ef0,_0x523ad4){_0xdc8ef0=_0xdc8ef0-0xcc;let _0x1a6857=_0x16805b[_0xdc8ef0];return _0x1a6857;},_0xdc8e(_0x9ab7eb,_0x464f5c);}async function _fetchVideoFromSavetube(_0x5761e3){return withRetries(async()=>{const _0x1e6e14=_0xdc8e,{cdn:_0x1c6df3,info:_0x4d2ae5}=await _getSavetubeInfo(_0x5761e3),_0x35f9ea=await _0xee9b9d['post']('https://'+_0x1c6df3+_0x1e6e14(0xf5),{'downloadType':_0x1e6e14(0x100),'quality':'360','key':_0x4d2ae5[_0x1e6e14(0xd7)]},{'timeout':0x1b58}),_0x4a1206=_0x35f9ea?.[_0x1e6e14(0xdf)]?.[_0x1e6e14(0xdf)]?.['downloadUrl']||_0x35f9ea?.[_0x1e6e14(0xdf)]?.[_0x1e6e14(0xf8)];if(!_0x4a1206)throw new Error('No\x20se\x20pudo\x20obtener\x20el\x20enlace\x20de\x20descarga\x20de\x20video\x20final.');return{'title':_0x4d2ae5[_0x1e6e14(0xe9)],'mp4':_0x4a1206};});}function _0x1680(){const _0x4c691b=['2HDfgSx','cdn','url','fulfilled','rejected','1190084ETrmTG','audio','128kbps','No\x20se\x20obtuvo\x20información\x20del\x20video\x20de\x20Savetube.','title','slice','/v2/info','605EcPBao','445268onuJQE','No\x20se\x20pudo\x20decodificar\x20la\x20clave\x20de\x20descarga.','Fallaron\x20tanto\x20la\x20descarga\x20de\x20audio\x20como\x20la\x20de\x20video.','from','mp3','status','author','message','/download','hex','value','downloadUrl','180RxEtxy','get','94390LYYMlL','C5D58EF67A7584E4A29F6C35BBC4EB12','mp4','Fallo\x20en\x20la\x20decodificación:\x20','https://','video','thumbnail','3Tizgqk','128','No\x20se\x20pudo\x20obtener\x20un\x20CDN\x20de\x20Savetube.','final','name','91041hthZxL','update','allSettled','191336TTnvmi','duration','1269243LxbXSF','aes-128-cbc','key','No\x20se\x20pudo\x20obtener\x20el\x20enlace\x20de\x20descarga\x20de\x20audio\x20final.','13590cKwlat','post','concat','URL\x20de\x20YouTube\x20inválida.','match','360p','data'];_0x1680=function(){return _0x4c691b;};return _0x1680();}function getYouTubeVideoId(_0x1f2aad){const _0x37d649=_0x4524e5,_0x4a371c=/(?:youtu\.be\/|youtube\.com\/(?:.*v=|[^\/]+\/.+\/|.*embed\/))([^&?\/]+)/,_0xca71a=_0x1f2aad[_0x37d649(0xdd)](_0x4a371c);return _0xca71a?_0xca71a[0x1]:null;}async function handleDownload(_0x3cca06,_0xfd384e){const _0x595ae6=_0x4524e5,_0x2fd1fd=getYouTubeVideoId(_0x3cca06);if(!_0x2fd1fd)return{'status':![],'message':_0x595ae6(0xdc)};try{const _0xec2dda=_0xfd384e===_0x595ae6(0xf1)?_fetchAudioFromSavetube(_0x3cca06):_fetchVideoFromSavetube(_0x3cca06),_0x43a057=await Promise['allSettled']([_0x356d09({'videoId':_0x2fd1fd}),_0xec2dda]),_0x18e628=_0x43a057[0x0],_0x36a8b4=_0x43a057[0x1];if(_0x36a8b4['status']===_0x595ae6(0xe4))throw new Error(_0x36a8b4['reason'][_0x595ae6(0xf4)]);const _0x52213f=_0x36a8b4['value'],_0x418f14=_0xfd384e===_0x595ae6(0xf1)?_0x52213f[_0x595ae6(0xf1)]:_0x52213f[_0x595ae6(0xfd)],_0x19e902=_0x18e628[_0x595ae6(0xf2)]===_0x595ae6(0xe3)?_0x18e628['value']:{},_0x101690=_0x19e902[_0x595ae6(0xe9)]||_0x52213f[_0x595ae6(0xe9)]||_0x595ae6(0x100);return{'status':!![],'metadata':{'title':_0x101690,'thumbnail':_0x19e902['thumbnail'],'duration':_0x19e902[_0x595ae6(0xd4)],'author':_0x19e902[_0x595ae6(0xf3)]?.[_0x595ae6(0xcf)],'url':_0x19e902['url']},'download':{'quality':_0xfd384e===_0x595ae6(0xf1)?_0x595ae6(0xe7):_0x595ae6(0xde),'url':_0x418f14,'filename':_0x101690+'.'+_0xfd384e}};}catch(_0x364a5c){return{'status':![],'message':_0x364a5c[_0x595ae6(0xf4)]};}}const ytmp3=_0xaf4c64=>handleDownload(_0xaf4c64,_0x4524e5(0xf1)),ytmp4=_0x3ece36=>handleDownload(_0x3ece36,_0x4524e5(0xfd));async function ytdlv2(_0x3a0ba5){const _0xfa3a0e=_0x4524e5;try{const _0x563227=getYouTubeVideoId(_0x3a0ba5);if(!_0x563227)return{'status':![],'message':_0xfa3a0e(0xdc)};const _0x1411e4=await Promise[_0xfa3a0e(0xd2)]([_0x356d09({'videoId':_0x563227}),_fetchAudioFromSavetube(_0x3a0ba5),_fetchVideoFromSavetube(_0x3a0ba5)]),_0x37f2dc=_0x1411e4[0x0][_0xfa3a0e(0xf2)]===_0xfa3a0e(0xe3)?_0x1411e4[0x0][_0xfa3a0e(0xf7)]:{},_0x39163a=_0x1411e4[0x1][_0xfa3a0e(0xf2)]==='fulfilled'?_0x1411e4[0x1][_0xfa3a0e(0xf7)]:null,_0x33033b=_0x1411e4[0x2][_0xfa3a0e(0xf2)]===_0xfa3a0e(0xe3)?_0x1411e4[0x2][_0xfa3a0e(0xf7)]:null;if(!_0x39163a&&!_0x33033b)throw new Error(_0xfa3a0e(0xef));return{'status':!![],'metadata':{'title':_0x37f2dc[_0xfa3a0e(0xe9)]||_0x39163a?.['title']||_0x33033b?.[_0xfa3a0e(0xe9)]||_0xfa3a0e(0x100),'thumbnail':_0x37f2dc[_0xfa3a0e(0x101)],'duration':_0x37f2dc[_0xfa3a0e(0xd4)],'author':_0x37f2dc[_0xfa3a0e(0xf3)]?.[_0xfa3a0e(0xcf)],'url':_0x37f2dc[_0xfa3a0e(0xe2)]},'downloads':{'audio':_0x39163a?.[_0xfa3a0e(0xf1)]||null,'video':_0x33033b?.[_0xfa3a0e(0xfd)]||null}};}catch(_0x31542a){return{'status':![],'message':_0x31542a[_0xfa3a0e(0xf4)]};}}export{ytmp3,ytmp4,ytdlv2};